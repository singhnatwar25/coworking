---
layout: default
---

<!-- Include Header -->
{% include header.html %}

<main class="container mt-5">
  <div class="row">
    <!-- Blog Content -->
    <div class="col-lg-8 mx-auto">
      <article class="blog-post mb-5">
        <!-- Back to Blog -->
        <a href="/blog" class="d-inline-flex align-items-center mb-4 text-decoration-none">
          <i class="bi bi-arrow-left me-2"></i> Back to Blog
        </a>

        <!-- Featured Image -->
        {% if page.image %}
        <img src="{{ page.image }}" alt="{{ page.title }}" class="img-fluid rounded-4 mb-4 shadow-sm w-100" style="max-height: 500px; object-fit: cover;">
        {% endif %}

        <!-- Title & Meta -->
        <header class="mb-4">
          <h1 class="display-5 fw-bold mb-3">{{ page.title }}</h1>
          <div class="d-flex flex-wrap align-items-center text-muted mb-3">
            <div class="d-flex align-items-center me-4 mb-2">
              <i class="bi bi-calendar3 me-2"></i>
              <span>{{ page.date | date: "%B %d, %Y" }}</span>
            </div>
            {% if page.author %}
            <div class="d-flex align-items-center me-4 mb-2">
              <i class="bi bi-person me-2"></i>
              <span>{{ page.author }}</span>
            </div>
            {% endif %}
            {% if page.categories %}
            <div class="d-flex align-items-center mb-2">
              <i class="bi bi-tag me-2"></i>
              <div>
                {% for category in page.categories %}
                  <a href="/categories/{{ category | slugify }}" class="badge bg-light text-dark text-decoration-none me-1">{{ category }}</a>
                {% endfor %}
              </div>
            </div>
            {% endif %}
          </div>
        </header>

        <!-- Blog Content -->
        <div class="blog-content fs-5 lh-lg">
          {{ content }}
        </div>

        <!-- Tags -->
        {% if page.tags %}
        <div class="mt-5 pt-4 border-top">
          <h6 class="mb-3">Tags:</h6>
          <div>
            {% for tag in page.tags %}
              <a href="/tags/{{ tag | slugify }}" class="btn btn-sm btn-outline-secondary me-2 mb-2">#{{ tag }}</a>
            {% endfor %}
          </div>
        </div>
        {% endif %}

        <!-- Author Bio -->
        {% if page.author %}
        <div class="card mt-5 border-0 shadow-sm">
          <div class="row g-0">
            <div class="col-md-2 d-flex align-items-center justify-content-center p-3">
              <img src="../ /images/authors/{{ page.author | slugify }}.jpg" 
                   alt="{{ page.author }}" 
                   class="rounded-circle" 
                   style="width: 100px; height: 100px; object-fit: cover;">
            </div>
            <div class="col-md-10">
              <div class="card-body">
                <h5 class="card-title">About {{ page.author }}</h5>
                <p class="card-text">
                  {% assign author_bio = site.data.authors[page.author] %}
                  {{ author_bio | default: "A passionate food enthusiast sharing delicious recipes and cooking tips." }}
                </p>
                <div class="social-links">
                  <a href="#" class="text-muted me-3"><i class="bi bi-twitter"></i></a>
                  <a href="#" class="text-muted me-3"><i class="bi bi-facebook"></i></a>
                  <a href="#" class="text-muted"><i class="bi bi-instagram"></i></a>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% endif %}

        <!-- Related Posts -->
        {% assign related_posts = site.posts | where_exp:"post", "post.url != page.url" | sample: 3 %}
        {% if related_posts.size > 0 %}
        <div class="mt-5">
          <h4 class="mb-4">You May Also Like</h4>
          <div class="row g-4">
            {% for post in related_posts limit: 3 %}
            <div class="col-md-4">
              <div class="card h-100 border-0 shadow-sm">
                {% if post.image %}
                <img src="{{ post.image }}" class="card-img-top" alt="{{ post.title }}" style="height: 180px; object-fit: cover;">
                {% endif %}
                <div class="card-body">
                  <h5 class="card-title h6">{{ post.title }}</h5>
                  <p class="card-text small text-muted">
                    {{ post.excerpt | strip_html | truncatewords: 15 }}
                  </p>
                </div>
                <div class="card-footer bg-transparent border-0 pt-0">
                  <a href="{{ post.url }}" class="btn btn-sm btn-outline-primary">Read More</a>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
        {% endif %}

      </article>
    </div>
  </div>
</main>


<!-- Search Script -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const searchResults = document.getElementById('searchResults');
        const searchResultsBody = document.getElementById('searchResultsBody');
        
        // Function to perform search
        function performSearch() {
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            if (searchTerm === '') {
                searchResults.style.display = 'none';
                return;
            }
            
            // Get all recipe cards or blog posts
            const contentItems = document.querySelectorAll('.recipe-card, .blog-post');
            let resultsFound = false;
            let resultsHTML = '';
            
            contentItems.forEach(item => {
                const title = item.querySelector('h1, h2, h3, h4, h5, h6')?.textContent?.toLowerCase() || '';
                const excerpt = item.querySelector('p, .card-text')?.textContent?.toLowerCase() || '';
                const tags = Array.from(item.querySelectorAll('.badge, .tag')).map(tag => 
                    tag.textContent?.toLowerCase()
                ).join(' ');
                
                if (title.includes(searchTerm) || 
                    excerpt.includes(searchTerm) || 
                    tags.includes(searchTerm)) {
                    
                    resultsFound = true;
                    const link = item.querySelector('a[href]')?.getAttribute('href') || '#';
                    const image = item.querySelector('img')?.getAttribute('src') || '';
                    const titleText = item.querySelector('h1, h2, h3, h4, h5, h6')?.textContent || 'Result';
                    const excerptText = item.querySelector('p, .card-text')?.textContent?.substring(0, 100) + '...' || '';
                    
                    resultsHTML += `
                        <div class="d-flex align-items-center p-2 border-bottom">
                            ${image ? `<img src="${image}" alt="${titleText}" class="rounded me-3" style="width: 50px; height: 50px; object-fit: cover;">` : ''}
                            <div class="flex-grow-1">
                                <h6 class="mb-0">${titleText}</h6>
                                <p class="small text-muted mb-0">${excerptText}</p>
                            </div>
                            <a href="${link}" class="btn btn-sm btn-outline-primary ms-2">View</a>
                        </div>
                    `;
                }
            });
            
            if (resultsFound) {
                searchResultsBody.innerHTML = resultsHTML;
            } else {
                searchResultsBody.innerHTML = `
                    <div class="text-center p-3">
                        <i class="bi bi-search display-5 text-muted mb-2"></i>
                        <p class="mb-0">No results found for "${searchTerm}"</p>
                        <p class="small text-muted">Try different keywords</p>
                    </div>
                `;
            }
            
            searchResults.style.display = 'block';
        }
        
        // Event listeners
        searchButton?.addEventListener('click', performSearch);
        searchInput?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
        
        // Close search results when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.search-box')) {
                searchResults.style.display = 'none';
            }
        });
    });
</script>

        <!-- Tags (Optional) -->
        {% if page.tags %}
        <div class="mt-4">
          <strong>Tags:</strong>
          {% for tag in page.tags %}
            <span class="badge bg-secondary">{{ tag }}</span>
          {% endfor %}
        </div>
        {% endif %}

        <!-- Navigation -->
        <div class="d-flex justify-content-between mt-5 pt-4 border-top">
          {% if page.previous %}
            <a href="{{ page.previous.url | relative_url }}" class="btn btn-outline-primary">← {{ page.previous.title }}</a>
          {% endif %}
          {% if page.next %}
            <a href="{{ page.next.url | relative_url }}" class="btn btn-outline-primary">{{ page.next.title }} →</a>
          {% endif %}
        </div>
      </article>
    </div>

    <!-- Sidebar -->
    <div class="col-md-4">
      <div class="sidebar p-4 bg-light rounded shadow-sm">
        <h4 class="mb-3">Recent Posts</h4>
        <ul class="list-unstyled">
          {% for post in site.posts limit:5 %}
          <li class="mb-2">
            <a href="{{ post.url | relative_url }}" class="text-decoration-none">
              {{ post.title }}
            </a>
          </li>
          {% endfor %}
        </ul>

        <hr>

        <h4 class="mb-3">Categories</h4>
        <ul class="list-unstyled">
          {% for category in site.categories %}
          <li>
            <a href="{{ '/categories/' | append: category[0] | relative_url }}" class="text-decoration-none">
              {{ category[0] }} ({{ category[1].size }})
            </a>
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div>
